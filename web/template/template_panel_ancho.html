<!DOCTYPE html>
<html lang="es">
<head><meta charset="UTF-8"/><title>Tickets 10</title>
<style>
  body{font-family:'Segoe UI',sans-serif;margin:0;padding:1cm;}
  .ticket{display:flex;border:1px dashed #bbb;background:{{$.Color}};margin-bottom:10px;page-break-inside:avoid;}
  .control{width:30%;padding:10px;border-right:1px solid #ccc;font-size:14px;font-weight:bold;background:#efefef;}
  .cliente{flex:1;padding:10px;font-size:14px;}
  .cliente .contenido{margin-bottom:8px;font-weight:bold;text-align:center;}
  .cliente .meta{font-size:11px;color:#666;display:flex;justify-content:space-between;}
</style>
<style>
  @media print {
    @page {
      size: {{if eq $.TipoPagina "a4"}}A4 portrait{{else if eq $.TipoPagina "oficio"}}8.5in 13in{{else}}letter portrait{{end}};
      margin: 0;
    }
    body {
      margin: 0 !important;
      padding: 0 !important;
    }
    .pagina {
      padding: 0 !important;
    }
    .fila {
      page-break-inside: avoid;
    }
    .ticket-completo {
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }
  }
</style>
</style>
</head>
<body>
<div class="pagina">
  {{ $n := or $.TicketsPorFila 2 }}
  {{ $total := len .Tickets }}
  {{range $i, $ticket := .Tickets}}
    {{if eq (mod $i $n) 0}}
    <div class="fila" style="display:flex;gap:16px;">
    {{end}}
      <div class="ticket ticket-completo" style="flex:1;background:{{$.Color}};">
        <div class="control">{{$ticket.ENCABEZADO}} N°{{$ticket.CORRELATIVO}}</div>
        <div class="cliente">
          <div class="contenido">{{$ticket.CONTENT}}</div>
          <div class="meta"><div>{{$ticket.FECHA_ACTUAL}}</div><div>{{$ticket.PIE}}</div></div>
        </div>
      </div>
    {{ $next := add $i 1 }}
    {{if or (eq (mod $next $n) 0) (eq $next $total)}}
    </div>
    {{end}}
  {{end}}
</div>
</body></html>
